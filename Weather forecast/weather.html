<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Professional weather application with current weather and 5-day forecast">
    <title>Weather App - Current Weather & Forecast</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.0/feather.min.css">
    
    <style>
/* CSS Reset and Base Styles */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

:root {
    /* Color Palette */
    --primary-blue: #2563eb;
    --primary-blue-hover: #1d4ed8;
    --secondary-blue: #eff6ff;
    --light-blue: #dbeafe;
    --dark-blue: #1e40af;
    
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-300: #d1d5db;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
    --gray-900: #111827;
    
    --success-green: #059669;
    --success-light: #d1fae5;
    --warning-orange: #d97706;
    --warning-light: #fef3c7;
    --error-red: #dc2626;
    --error-light: #fecaca;
    
    --white: #ffffff;
    --black: #000000;
    
    /* Typography */
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-base: 1rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.25rem;
    --font-size-2xl: 1.5rem;
    --font-size-3xl: 1.875rem;
    --font-size-4xl: 2.25rem;
    
    /* Spacing */
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
    --space-10: 2.5rem;
    --space-12: 3rem;
    --space-16: 4rem;
    --space-20: 5rem;
    
    /* Border Radius */
    --radius-sm: 0.375rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;
    --radius-xl: 1rem;
    
    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    
    /* Transitions */
    --transition-fast: 150ms ease-in-out;
    --transition-normal: 300ms ease-in-out;
    --transition-slow: 500ms ease-in-out;
}

/* Base Styles */
html {
    font-size: 16px;
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    line-height: 1.6;
    color: var(--gray-800);
    background: linear-gradient(135deg, var(--secondary-blue) 0%, var(--light-blue) 100%);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Screen Reader Only */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Container */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: var(--space-4);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Header */
.header {
    text-align: center;
    margin-bottom: var(--space-8);
    padding: var(--space-6) 0;
}

.app-title {
    font-size: var(--font-size-3xl);
    font-weight: 700;
    color: var(--dark-blue);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    margin-bottom: var(--space-2);
}

.app-title i {
    width: 2rem;
    height: 2rem;
    color: var(--primary-blue);
}

/* Main Content */
.main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-8);
}

/* Search Section */
.search-section {
    max-width: 500px;
    margin: 0 auto;
    width: 100%;
}

.search-form {
    margin-bottom: var(--space-4);
}

.search-container {
    display: flex;
    position: relative;
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    overflow: hidden;
    transition: box-shadow var(--transition-fast);
}

.search-container:focus-within {
    box-shadow: var(--shadow-lg);
}

.city-input {
    flex: 1;
    padding: var(--space-4) var(--space-5);
    border: none;
    font-size: var(--font-size-lg);
    color: var(--gray-800);
    background: transparent;
    outline: none;
}

.city-input::placeholder {
    color: var(--gray-400);
}

.search-btn {
    padding: var(--space-4) var(--space-5);
    background: var(--primary-blue);
    color: var(--white);
    border: none;
    cursor: pointer;
    transition: background-color var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
}

.search-btn:hover {
    background: var(--primary-blue-hover);
}

.search-btn:focus {
    outline: 2px solid var(--primary-blue);
    outline-offset: 2px;
}

.search-btn i {
    width: 1.25rem;
    height: 1.25rem;
}

.search-help {
    font-size: var(--font-size-sm);
    color: var(--gray-600);
    text-align: center;
    margin-top: var(--space-2);
}

/* Error Message */
.error-message {
    background: var(--error-light);
    color: var(--error-red);
    padding: var(--space-4);
    border-radius: var(--radius-md);
    border: 1px solid var(--error-red);
    text-align: center;
    font-weight: 500;
    display: none;
    animation: slideIn 0.3s ease-out;
}

.error-message.show {
    display: block;
}

/* Loading Spinner */
.loading-spinner {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--space-4);
    padding: var(--space-8);
    text-align: center;
}

.loading-spinner.show {
    display: flex;
}

.spinner {
    width: 3rem;
    height: 3rem;
    border: 3px solid var(--gray-200);
    border-top: 3px solid var(--primary-blue);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

.loading-spinner p {
    color: var(--gray-600);
    font-weight: 500;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Weather Content */
.weather-content {
    display: none;
    animation: fadeIn 0.5s ease-out;
}

.weather-content.show {
    display: block;
}

/* Current Weather Card */
.current-weather {
    margin-bottom: var(--space-8);
}

.weather-card {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--space-8);
    box-shadow: var(--shadow-lg);
    transition: transform var(--transition-fast);
}

.weather-card:hover {
    transform: translateY(-2px);
}

.current-card {
    background: linear-gradient(135deg, var(--primary-blue) 0%, var(--dark-blue) 100%);
    color: var(--white);
}

.weather-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-6);
}

.city-name {
    font-size: var(--font-size-2xl);
    font-weight: 600;
    margin-bottom: var(--space-1);
}

.current-date {
    font-size: var(--font-size-sm);
    opacity: 0.9;
}

.weather-icon-container {
    flex-shrink: 0;
}

.weather-icon {
    width: 4rem;
    height: 4rem;
    object-fit: contain;
}

.weather-main {
    text-align: center;
    margin-bottom: var(--space-8);
}

.temperature-display {
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: var(--space-2);
    margin-bottom: var(--space-3);
}

.temperature {
    font-size: var(--font-size-4xl);
    font-weight: 300;
    line-height: 1;
}

.temp-unit {
    font-size: var(--font-size-xl);
    font-weight: 400;
}

.weather-description {
    font-size: var(--font-size-lg);
    text-transform: capitalize;
    opacity: 0.9;
}

.weather-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: var(--space-4);
}

.detail-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3);
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-md);
    backdrop-filter: blur(10px);
}

.detail-item i {
    width: 1.5rem;
    height: 1.5rem;
    opacity: 0.8;
}

.detail-label {
    font-size: var(--font-size-xs);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    opacity: 0.8;
    font-weight: 500;
}

.detail-value {
    font-size: var(--font-size-sm);
    font-weight: 600;
}

/* Forecast Section */
.forecast-section {
    width: 100%;
}

.section-title {
    font-size: var(--font-size-xl);
    font-weight: 600;
    color: var(--gray-800);
    margin-bottom: var(--space-6);
    text-align: center;
}

.forecast-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-4);
}

.forecast-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    padding: var(--space-5);
    box-shadow: var(--shadow-md);
    text-align: center;
    transition: all var(--transition-fast);
    border: 1px solid var(--gray-100);
}

.forecast-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
}

.forecast-date {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--gray-600);
    margin-bottom: var(--space-3);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.forecast-icon {
    width: 3rem;
    height: 3rem;
    object-fit: contain;
    margin: 0 auto var(--space-3);
}

.forecast-temps {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-2);
}

.forecast-high {
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--gray-800);
}

.forecast-low {
    font-size: var(--font-size-base);
    color: var(--gray-500);
}

.forecast-desc {
    font-size: var(--font-size-sm);
    color: var(--gray-600);
    text-transform: capitalize;
    line-height: 1.4;
}

/* Empty State */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: var(--space-16) var(--space-8);
    color: var(--gray-600);
}

.empty-state.hidden {
    display: none;
}

.empty-icon {
    width: 4rem;
    height: 4rem;
    background: var(--gray-200);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: var(--space-4);
}

.empty-icon i {
    width: 2rem;
    height: 2rem;
    color: var(--gray-400);
}

.empty-state h3 {
    font-size: var(--font-size-xl);
    font-weight: 600;
    margin-bottom: var(--space-2);
    color: var(--gray-700);
}

.empty-state p {
    font-size: var(--font-size-base);
    max-width: 400px;
}

/* Footer */
.footer {
    margin-top: auto;
    padding: var(--space-6) 0;
    text-align: center;
    border-top: 1px solid rgba(255, 255, 255, 0.2);
}

.footer p {
    font-size: var(--font-size-sm);
    color: var(--gray-600);
}

/* Animations */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive Design */
@media (max-width: 768px) {
    .container {
        padding: var(--space-3);
    }
    
    .app-title {
        font-size: var(--font-size-2xl);
    }
    
    .weather-card {
        padding: var(--space-6);
    }
    
    .weather-header {
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: var(--space-4);
    }
    
    .weather-details {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .forecast-container {
        grid-template-columns: 1fr;
        gap: var(--space-3);
    }
    
    .forecast-card {
        padding: var(--space-4);
    }
    
    .temperature {
        font-size: var(--font-size-3xl);
    }
    
    .city-name {
        font-size: var(--font-size-xl);
    }
}

@media (max-width: 480px) {
    .app-title {
        font-size: var(--font-size-xl);
        flex-direction: column;
        gap: var(--space-2);
    }
    
    .search-container {
        flex-direction: column;
    }
    
    .search-btn {
        border-top: 1px solid var(--gray-200);
    }
    
    .weather-details {
        grid-template-columns: 1fr;
    }
    
    .detail-item {
        flex-direction: row;
        justify-content: space-between;
        text-align: left;
    }
    
    .detail-item i {
        order: 1;
    }
    
    .detail-label {
        order: 2;
        flex: 1;
        margin-left: var(--space-3);
        text-align: left;
    }
    
    .detail-value {
        order: 3;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    :root {
        --gray-400: #666666;
        --gray-500: #555555;
        --gray-600: #444444;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Print styles */
@media print {
    body {
        background: var(--white);
        color: var(--black);
    }
    
    .search-section,
    .loading-spinner,
    .empty-state {
        display: none !important;
    }
    
    .weather-card {
        box-shadow: none;
        border: 1px solid var(--gray-300);
    }
    
    .current-card {
        background: var(--white) !important;
        color: var(--black) !important;
    }
    
    .detail-item {
        background: var(--gray-100) !important;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="app-title">
                <i data-feather="cloud" aria-hidden="true"></i>
                Weather Forecast
            </h1>
        </header>

        <main class="main-content">
            <!-- Search Section -->
            <section class="search-section" aria-label="Weather search">
                <form class="search-form" id="searchForm" role="search">
                    <div class="search-container">
                        <label for="cityInput" class="sr-only">Enter city name</label>
                        <input 
                            type="text" 
                            id="cityInput" 
                            class="city-input" 
                            placeholder="Enter city name..."
                            aria-describedby="search-help"
                            required
                            autocomplete="off"
                        >
                        <button type="submit" class="search-btn" aria-label="Search weather">
                            <i data-feather="search" aria-hidden="true"></i>
                        </button>
                    </div>
                    <div id="search-help" class="search-help">
                        Enter a city name to get current weather and 5-day forecast
                    </div>
                </form>
                
                <!-- Error Message -->
                <div id="errorMessage" class="error-message" role="alert" aria-live="polite"></div>
            </section>

            <!-- Loading Spinner -->
            <div id="loadingSpinner" class="loading-spinner" role="status" aria-label="Loading weather data">
                <div class="spinner"></div>
                <p>Fetching weather data...</p>
            </div>

            <!-- Weather Content -->
            <div id="weatherContent" class="weather-content">
                <!-- Current Weather Section -->
                <section class="current-weather" aria-label="Current weather conditions">
                    <div class="weather-card current-card">
                        <div class="weather-header">
                            <div class="location-info">
                                <h2 id="currentCity" class="city-name"></h2>
                                <p id="currentDate" class="current-date"></p>
                            </div>
                            <div class="weather-icon-container">
                                <img id="currentIcon" class="weather-icon" alt="" role="img">
                            </div>
                        </div>
                        
                        <div class="weather-main">
                            <div class="temperature-display">
                                <span id="currentTemp" class="temperature"></span>
                                <span class="temp-unit">째C</span>
                            </div>
                            <p id="currentDescription" class="weather-description"></p>
                        </div>

                        <div class="weather-details">
                            <div class="detail-item">
                                <i data-feather="droplet" aria-hidden="true"></i>
                                <span class="detail-label">Humidity</span>
                                <span id="currentHumidity" class="detail-value"></span>
                            </div>
                            <div class="detail-item">
                                <i data-feather="thermometer" aria-hidden="true"></i>
                                <span class="detail-label">Feels like</span>
                                <span id="feelsLike" class="detail-value"></span>
                            </div>
                            <div class="detail-item">
                                <i data-feather="wind" aria-hidden="true"></i>
                                <span class="detail-label">Wind</span>
                                <span id="windSpeed" class="detail-value"></span>
                            </div>
                            <div class="detail-item">
                                <i data-feather="eye" aria-hidden="true"></i>
                                <span class="detail-label">Visibility</span>
                                <span id="visibility" class="detail-value"></span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 5-Day Forecast Section -->
                <section class="forecast-section" aria-label="5-day weather forecast">
                    <h3 class="section-title">5-Day Forecast</h3>
                    <div id="forecastContainer" class="forecast-container" role="list">
                        <!-- Forecast cards will be dynamically inserted here -->
                    </div>
                </section>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state">
                <div class="empty-icon">
                    <i data-feather="map-pin" aria-hidden="true"></i>
                </div>
                <h3>No weather data to display</h3>
                <p>Enter a city name above to get started with weather forecasts</p>
            </div>
        </main>

        <footer class="footer">
            <p>&copy; 2025 Weather App. Powered by OpenWeatherMap API.</p>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.0/feather.min.js"></script>
    
    <script>
/**
 * Professional Weather Application
 * Integrates with OpenWeatherMap API for current weather and 5-day forecast
 */

class WeatherApp {
    constructor() {
        // API configuration - direct OpenWeatherMap API calls
        this.API_KEY = 'f5bc4295aee891c226e540e73fdf6f88'; // Replace with your API key
        this.BASE_URL = 'https://api.openweathermap.org/data/2.5';
        this.ICON_URL = 'https://openweathermap.org/img/wn';
        
        // DOM elements
        this.elements = this.initializeElements();
        
        // Initialize the application
        this.init();
    }

    /**
     * Get API key from environment variables with fallback
     */
    getApiKey() {
        // In browser environment, we need to make an API call to get the key
        // For now, we'll handle this in the fetch methods
        return null; // Will be handled in the API calls
    }

    /**
     * Initialize DOM elements
     */
    initializeElements() {
        return {
            searchForm: document.getElementById('searchForm'),
            cityInput: document.getElementById('cityInput'),
            errorMessage: document.getElementById('errorMessage'),
            loadingSpinner: document.getElementById('loadingSpinner'),
            weatherContent: document.getElementById('weatherContent'),
            emptyState: document.getElementById('emptyState'),
            
            // Current weather elements
            currentCity: document.getElementById('currentCity'),
            currentDate: document.getElementById('currentDate'),
            currentIcon: document.getElementById('currentIcon'),
            currentTemp: document.getElementById('currentTemp'),
            currentDescription: document.getElementById('currentDescription'),
            currentHumidity: document.getElementById('currentHumidity'),
            feelsLike: document.getElementById('feelsLike'),
            windSpeed: document.getElementById('windSpeed'),
            visibility: document.getElementById('visibility'),
            
            // Forecast elements
            forecastContainer: document.getElementById('forecastContainer')
        };
    }

    /**
     * Initialize the application
     */
    init() {
        this.bindEvents();
        this.initializeFeatherIcons();
        this.showEmptyState();
    }

    /**
     * Initialize Feather icons
     */
    initializeFeatherIcons() {
        if (typeof feather !== 'undefined') {
            feather.replace();
        }
    }

    /**
     * Bind event listeners
     */
    bindEvents() {
        this.elements.searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            this.handleSearch();
        });

        // Handle Enter key in input
        this.elements.cityInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                this.handleSearch();
            }
        });
    }

    /**
     * Handle search form submission
     */
    async handleSearch() {
        const cityName = this.elements.cityInput.value.trim();
        
        if (!this.validateInput(cityName)) {
            return;
        }

        await this.fetchWeatherData(cityName);
    }

    /**
     * Validate user input
     */
    validateInput(cityName) {
        if (!cityName) {
            this.showError('Please enter a city name');
            this.elements.cityInput.focus();
            return false;
        }

        if (cityName.length < 2) {
            this.showError('City name must be at least 2 characters long');
            this.elements.cityInput.focus();
            return false;
        }

        if (!/^[a-zA-Z\s\-',.]+$/.test(cityName)) {
            this.showError('Please enter a valid city name (letters only)');
            this.elements.cityInput.focus();
            return false;
        }

        return true;
    }

    /**
     * Fetch weather data from OpenWeatherMap API
     */
    async fetchWeatherData(cityName) {
        try {
            this.showLoading();
            this.hideError();

            // Check if API key is configured
            if (this.API_KEY === 'your_openweather_api_key_here') {
                throw new Error('Please replace "your_openweather_api_key_here" with your actual OpenWeatherMap API key in the code.');
            }

            // Fetch current weather and forecast concurrently
            const [currentWeather, forecast] = await Promise.all([
                this.fetchCurrentWeather(cityName),
                this.fetchForecast(cityName)
            ]);

            this.displayWeatherData(currentWeather, forecast);
            this.hideLoading();

        } catch (error) {
            console.error('Error fetching weather data:', error);
            this.hideLoading();
            this.handleError(error);
        }
    }

    /**
     * Fetch current weather data
     */
    async fetchCurrentWeather(cityName) {
        const url = `${this.BASE_URL}/weather?q=${encodeURIComponent(cityName)}&appid=${this.API_KEY}&units=metric`;
        
        const response = await fetch(url);
        
        if (!response.ok) {
            if (response.status === 404) {
                throw new Error(`City "${cityName}" not found. Please check the spelling and try again.`);
            } else if (response.status === 401) {
                throw new Error('Invalid API key. Please check your OpenWeatherMap API configuration.');
            } else if (response.status === 429) {
                throw new Error('Too many requests. Please try again in a moment.');
            } else {
                throw new Error(`Failed to fetch weather data. Server responded with status ${response.status}.`);
            }
        }

        return await response.json();
    }

    /**
     * Fetch 5-day forecast data
     */
    async fetchForecast(cityName) {
        const url = `${this.BASE_URL}/forecast?q=${encodeURIComponent(cityName)}&appid=${this.API_KEY}&units=metric`;
        
        const response = await fetch(url);
        
        if (!response.ok) {
            if (response.status === 404) {
                throw new Error(`Forecast for "${cityName}" not found. Please check the spelling and try again.`);
            } else if (response.status === 401) {
                throw new Error('Invalid API key. Please check your OpenWeatherMap API configuration.');
            } else {
                throw new Error(`Failed to fetch forecast data. Server responded with status ${response.status}.`);
            }
        }

        return await response.json();
    }

    /**
     * Display weather data in the UI
     */
    displayWeatherData(currentWeather, forecast) {
        this.displayCurrentWeather(currentWeather);
        this.displayForecast(forecast);
        this.showWeatherContent();
    }

    /**
     * Display current weather data
     */
    displayCurrentWeather(data) {
        const {
            name,
            main: { temp, feels_like, humidity },
            weather,
            wind: { speed },
            visibility,
            sys: { country }
        } = data;

        // Update DOM elements
        this.elements.currentCity.textContent = `${name}, ${country}`;
        this.elements.currentDate.textContent = this.formatCurrentDate();
        this.elements.currentTemp.textContent = Math.round(temp);
        this.elements.currentDescription.textContent = weather[0].description;
        this.elements.currentHumidity.textContent = `${humidity}%`;
        this.elements.feelsLike.textContent = `${Math.round(feels_like)}째C`;
        this.elements.windSpeed.textContent = `${speed} m/s`;
        this.elements.visibility.textContent = `${(visibility / 1000).toFixed(1)} km`;

        // Update weather icon
        const iconCode = weather[0].icon;
        this.elements.currentIcon.src = `${this.ICON_URL}/${iconCode}@2x.png`;
        this.elements.currentIcon.alt = `Weather icon: ${weather[0].description}`;
    }

    /**
     * Display 5-day forecast
     */
    displayForecast(data) {
        // Group forecast data by day (taking one reading per day at noon or closest)
        const dailyForecasts = this.processForecastData(data.list);
        
        // Clear existing forecast cards
        this.elements.forecastContainer.innerHTML = '';

        // Create forecast cards
        dailyForecasts.forEach((dayData, index) => {
            if (index < 5) { // Show only 5 days
                const forecastCard = this.createForecastCard(dayData);
                this.elements.forecastContainer.appendChild(forecastCard);
            }
        });
    }

    /**
     * Process forecast data to get daily summaries
     */
    processForecastData(forecastList) {
        const dailyData = {};

        forecastList.forEach(item => {
            const date = new Date(item.dt * 1000);
            const dateKey = date.toDateString();

            if (!dailyData[dateKey]) {
                dailyData[dateKey] = {
                    date: date,
                    temps: [],
                    weather: item.weather[0],
                    items: []
                };
            }

            dailyData[dateKey].temps.push(item.main.temp);
            dailyData[dateKey].items.push(item);
        });

        // Convert to array and calculate min/max temps
        return Object.values(dailyData).map(day => ({
            date: day.date,
            maxTemp: Math.round(Math.max(...day.temps)),
            minTemp: Math.round(Math.min(...day.temps)),
            weather: day.weather,
            // Use the forecast item closest to noon
            noonItem: this.findNoonForecast(day.items)
        }));
    }

    /**
     * Find the forecast item closest to noon
     */
    findNoonForecast(items) {
        return items.reduce((closest, current) => {
            const currentHour = new Date(current.dt * 1000).getHours();
            const closestHour = new Date(closest.dt * 1000).getHours();
            
            const currentDiff = Math.abs(currentHour - 12);
            const closestDiff = Math.abs(closestHour - 12);
            
            return currentDiff < closestDiff ? current : closest;
        });
    }

    /**
     * Create a forecast card element
     */
    createForecastCard(dayData) {
        const card = document.createElement('div');
        card.className = 'forecast-card';
        card.setAttribute('role', 'listitem');

        const iconCode = dayData.weather.icon;
        const iconUrl = `${this.ICON_URL}/${iconCode}@2x.png`;

        card.innerHTML = `
            <div class="forecast-date">${this.formatForecastDate(dayData.date)}</div>
            <img src="${iconUrl}" alt="Weather icon: ${dayData.weather.description}" class="forecast-icon">
            <div class="forecast-temps">
                <span class="forecast-high">${dayData.maxTemp}째</span>
                <span class="forecast-low">${dayData.minTemp}째</span>
            </div>
            <div class="forecast-desc">${dayData.weather.description}</div>
        `;

        return card;
    }

    /**
     * Format current date
     */
    formatCurrentDate() {
        const options = {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        };
        return new Date().toLocaleDateString('en-US', options);
    }

    /**
     * Format forecast date
     */
    formatForecastDate(date) {
        const today = new Date();
        const tomorrow = new Date(today);
        tomorrow.setDate(tomorrow.getDate() + 1);

        if (date.toDateString() === today.toDateString()) {
            return 'Today';
        } else if (date.toDateString() === tomorrow.toDateString()) {
            return 'Tomorrow';
        } else {
            return date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
        }
    }

    /**
     * Show loading state
     */
    showLoading() {
        this.elements.loadingSpinner.classList.add('show');
        this.elements.weatherContent.classList.remove('show');
        this.elements.emptyState.classList.add('hidden');
    }

    /**
     * Hide loading state
     */
    hideLoading() {
        this.elements.loadingSpinner.classList.remove('show');
    }

    /**
     * Show weather content
     */
    showWeatherContent() {
        this.elements.weatherContent.classList.add('show');
        this.elements.emptyState.classList.add('hidden');
    }

    /**
     * Show empty state
     */
    showEmptyState() {
        this.elements.emptyState.classList.remove('hidden');
        this.elements.weatherContent.classList.remove('show');
    }

    /**
     * Show error message
     */
    showError(message) {
        this.elements.errorMessage.textContent = message;
        this.elements.errorMessage.classList.add('show');
        
        // Hide error after 5 seconds
        setTimeout(() => {
            this.hideError();
        }, 5000);
    }

    /**
     * Hide error message
     */
    hideError() {
        this.elements.errorMessage.classList.remove('show');
    }

    /**
     * Handle different types of errors
     */
    handleError(error) {
        let errorMessage = 'An unexpected error occurred. Please try again.';

        if (error.message.includes('not found')) {
            errorMessage = error.message;
        } else if (error.message.includes('API key')) {
            errorMessage = error.message;
        } else if (error.message.includes('Too many requests')) {
            errorMessage = error.message;
        } else if (error.name === 'TypeError' || error.message.includes('fetch')) {
            errorMessage = 'Network error. Please check your internet connection and try again.';
        }

        this.showError(errorMessage);
        this.showEmptyState();
    }
}

// Initialize the weather app when the DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    new WeatherApp();
});

// Handle online/offline events
window.addEventListener('online', () => {
    console.log('Network connection restored');
});

window.addEventListener('offline', () => {
    console.log('Network connection lost');
    const errorMessage = document.getElementById('errorMessage');
    if (errorMessage) {
        errorMessage.textContent = 'Network connection lost. Please check your internet connection.';
        errorMessage.classList.add('show');
    }
});
    </script>
</body>
</html>